#:kivy 1.10.0
#:import system_msg trans.system_msg
#:import trans trans.trans
#:import local_msg trans.local_msg

<login>:
    Label:
        font_size: 40 
        pos: (0, 150)
        text: "Welcome to ICS Chat System!"

    BoxLayout:
        orientation: "vertical"
        size_hint: None, None
        width: 500
        spacing: 10
        center_x: root.width / 2
        center_y: root.height / 2
        canvas:
            Color:
                rgb: .3, .3, .3
            
            Rectangle:
                size: self.width + 20, self.height + 40
                pos: self.x - 10, self.y - 20

        GridLayout:
            cols: 2
            size_hint_y: None
            height: 40


            Label:
                text:"Username: "
                size_hint_x: .25
                font_size: "20sp"

            TextInput:
                size_hint_x: .75
                font_size: '20sp'
                center_x: root.width / 2
                multiline: False
                id: usrn
                on_text_validate: root.usrlgin

        Button:
            id: login
            text: "Log in"
            font_size: "20sp"
            size_hint: None, None
            width: 200
            height: 50
            pos_hint:{"center_x": 0.5}
            on_press: root.usrlgin()

<command>:

    BoxLayout:
        orientation: "horizontal"
        size: root.size
        BoxLayout:
            
            Label:                            
                id: cmd_usrn
                # text:"Hello, " +  + "\nWhat do you want to do?"
                font_size: '40sp'
                halign: 'left'
            

        GridLayout:
            size_hint: .4, .8
            pos_hint: {'right': 1}
            cols: 1
            width: 300
            height: 40
            pos_hint: {"center_y": .5}
            spacing: 10
            padding: 20

            Button:
                text: "Chat"
                font_size: "20sp"
                on_press: root.manager.current = 'chat_with'
            
            Button:
                text: "History"
                font_size: "20sp" 

            Button:
                text: "?"
                font_size: "20sp" 

            Button:
                text: "Sonnets"
                font_size: "20sp" 
                on_press: root.manager.current = 'sonnet'

            Button:
                text: "Quit"
                font_size: "20sp"        
                on_press: root.bye() 
                
<sonnet>:
    BoxLayout:
        orientation: "horizontal"
        size: root.size
        padding: 20
        spacing: 20

        GridLayout:
            cols:1
            padding: 20

            Label:
                text: "Sonnet"
                font_size: "40sp"
                size_hint_y: .2

            AnchorLayout:
                anchor_y: 'top'
                Label:
                    text: "fjdasklfjdksjkl\nfjkdlasjfkldsajfkdj\nfjdasjfkldsajfldksaj\nfjdskalfjdklsajfdkl"
                    font_size: "20sp"
        
        GridLayout:
            cols: 1
            size_hint: .25, None
            pos_hint: {'top': .9}            
            spacing: 10
            
            Button:
                text: "Return"
                font_size: "20sp"
                size_hint: None, None
                size: 150, 40
                on_press: root.manager.current = 'command'
                
<chatting>:
    BoxLayout:
        size: root.size
        padding: 15
        spacing: 10

        GridLayout:
            cols:1
            spacing: 20

            ScrollView:
                TextInput:

            GridLayout:
                size_hint_y: None
                height: 40
                cols: 2

                TextInput:
                    font_size: "20sp"
                    multiline: False

                Button:
                    size_hint_x: None
                    width: 100
                    text:'Send'
                    font_size: "20sp"
            
        GridLayout:
            cols: 1
            size_hint: None, None
            width: 150
            pos_hint: {'top': 0.9}
            spacing: 10

            Button:
                text: "Return"
                font_size: "20sp"
                on_press: root.manager.current = 'command'

            Button:
                text: "History"
                font_size: '20sp'

<chat_with>:
    BoxLayout:
        orientation: 'vertical'
        center_y: root.height / 2
        center_x: root.width / 2
        size_hint: None, None
        width: 500
        
        GridLayout:
            cols: 2

            Label:
                text: 'Chat with'
                font_size: "40sp"
            Button:
                text: 'select'
                on_press: root
        Button:
            size_hint: None, None
            size: 100, 60
            text: 'Join'
            font_size: '20sp'
            on_press: root.manager.current = 'chatting'

                
<peermsg>:
    Label:
        halign: "left"
        font_size: '15sp'
        # text:

<selfmsg>:
    Label:
        halign: "right"
        font_size: '15sp'
        # text:

<notice>:
    size_hint: .5, .5
    auto_dismiss: False
    title: "Notice"
    GridLayout:
        cols: 1
        Label:
            text: app.notice
        Button:
            text: 'OK'
            on_press: root.dismiss()


 